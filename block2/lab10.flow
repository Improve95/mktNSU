import labs/block2/rational/polynomRatSimplify;

main() {
    testPolynom = "(x * 2 + 0) + x * 3";
    // testPolynom = "x * 1 * x - 5 * 5";
    // testPolynom = "2 * y + x + x";
    println("str:" + testPolynom);

    polynomExpr = s2re(testPolynom);

    rules2 = [
        s2rule("(x + 0)", "x"),
        s2rule("(0 + x)", "x"),
        s2rule("(x * 1)", "x"),
        s2rule("(1 * x)", "x"),
        s2rule("(x - x)", "0"),
        s2rule("(0 * x)", "0"), 
        s2rule("(x * 0)", "0"), 
        s2rule("x * a + x * b", "x * (a + b)"),
        s2rule("x * x - y * y", "(x + y) * (x - y)"),
        s2rule("x + x", "2 * x"),
    ];

    simplePolynomExpr = simplifyPolynom(polynomExpr, rules2);

    println("simple polynom: " + re2s(simplePolynomExpr, 0));

    vars = [Pair("x", RatNum(3, 2)), Pair("y", RatNum(2, 2)), Pair("z", RatNum(4, 5))];
    tree = setTreeValues(TreeEmpty(), vars);

    res = calcRe(simplePolynomExpr, tree);
    println("res: " + reNum2s(res));

    quit(0);
}
