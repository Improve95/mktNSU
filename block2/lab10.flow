import labs/block2/rational/polynomRatSimplify;

main() {
    testPolynom = "x + y + z + y";
    println("str:" + testPolynom);
    println("");

    polynomExpr = s2re(testPolynom);

    rules2 = [
        convertToRule("(x + 0)", "x"),
        convertToRule("(0 + x)", "x"),
        convertToRule("(x * 1)", "x"),
        convertToRule("(1 * x)", "x"),
        convertToRule("(x - x)", "0"),
        convertToRule("(0 * x)", "0"), 
        convertToRule("(x * 0)", "0"), 
        convertToRule("x * a + x * b", "x * (a + b)"),
        convertToRule("x * x - y * y", "(x + y) * (x - y)"),
        convertToRule("x + x", "2 * x"),

        convertToRule("x + y", "y + x"),
        convertToRule("x + y + z", "y + z + x"),
    ];

    simplePolynomExpr = simplifyPolynom(polynomExpr, rules2);

    println("simple polynom: " + re2s(simplePolynomExpr, 0));

    vars = [Pair("x", RatNum(3, 2)), Pair("y", RatNum(2, 2)), Pair("z", RatNum(4, 5))];
    tree = setTreeValues(TreeEmpty(), vars);

    res = calcRe(simplePolynomExpr, tree);
    println("res: " + reNum2s(res));

    quit(0);
}
